<%# <% sum = 0 %>
<div class="container">
  <h1 class = "mt-5 mb-3">My Basket</h1>
  <div class="headings d-flex justify-content-between">
    <h2>Order ID: <%= @order.id %></h2>
    <%= link_to "Want some more?", products_path%>
  </div>
  <hr>
  <% # LOOPING THROUGH ORDER_PRODUCTS AND SHOWING DETAILS THEREIN %>
  <% @order_products.each do |order_product| %>

    <strong><%= link_to order_product.product.name, product_path(order_product.product_id) %></strong>
    <br>
    Qty: <%= order_product.qty %>
    <br>
    Price: <%= price = order_product.qty * order_product.product.price %>
    <br>

    <%# <% sum += price %>

    <%= link_to "Remove from basket", order_product_path(order_product), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class:"btn btn-primary"%>
    <br>
    <%= simple_form_for [order_product.product, order_product] do |f|%>
      <%= f.button :submit, "UP", class:"btn btn-primary" %>
      <%# <%= f.hidden_field :change, value: "up" %>
    <% end %>

    <%= simple_form_for [order_product.product, order_product] do |f|%>
      <%= f.button :submit, "DOWN", class:"btn btn-primary" %>
      <%# <%= f.hidden_field :change, value: "down" %>
    <% end %>
    <br>
  <% end %>

    <%# Total price: <%= sum %>
  Total price: <%= @order.amount %>

  <%= form_tag checkouts_path do %>
    <%= hidden_field_tag 'order_id', @order.id %>
    <div class="bottom-row d-flex justify-content-between">
      <%= submit_tag 'Checkout', class: 'btn btn-primary my-3' %>
      <% end %>
      <%= link_to "Want some more?", products_path%>
    </div>
</div>
